---
source: crates/ruff_linter/src/rules/flake8_bugbear/mod.rs
---
error[B039]: 19:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:19:26
   |
18 | # Bad
19 | ContextVar("cv", default=[])
   |                          ^^
20 | ContextVar("cv", default={})
21 | ContextVar("cv", default=list())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 20:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:20:26
   |
18 | # Bad
19 | ContextVar("cv", default=[])
20 | ContextVar("cv", default={})
   |                          ^^
21 | ContextVar("cv", default=list())
22 | ContextVar("cv", default=set())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 21:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:21:26
   |
19 | ContextVar("cv", default=[])
20 | ContextVar("cv", default={})
21 | ContextVar("cv", default=list())
   |                          ^^^^^^
22 | ContextVar("cv", default=set())
23 | ContextVar("cv", default=dict())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 22:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:22:26
   |
20 | ContextVar("cv", default={})
21 | ContextVar("cv", default=list())
22 | ContextVar("cv", default=set())
   |                          ^^^^^
23 | ContextVar("cv", default=dict())
24 | ContextVar("cv", default=[char for char in "foo"])
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 23:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:23:26
   |
21 | ContextVar("cv", default=list())
22 | ContextVar("cv", default=set())
23 | ContextVar("cv", default=dict())
   |                          ^^^^^^
24 | ContextVar("cv", default=[char for char in "foo"])
25 | ContextVar("cv", default={char for char in "foo"})
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 24:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:24:26
   |
22 | ContextVar("cv", default=set())
23 | ContextVar("cv", default=dict())
24 | ContextVar("cv", default=[char for char in "foo"])
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^
25 | ContextVar("cv", default={char for char in "foo"})
26 | ContextVar("cv", default={char: idx for idx, char in enumerate("foo")})
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 25:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:25:26
   |
23 | ContextVar("cv", default=dict())
24 | ContextVar("cv", default=[char for char in "foo"])
25 | ContextVar("cv", default={char for char in "foo"})
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^
26 | ContextVar("cv", default={char: idx for idx, char in enumerate("foo")})
27 | ContextVar("cv", default=collections.deque())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 26:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:26:26
   |
24 | ContextVar("cv", default=[char for char in "foo"])
25 | ContextVar("cv", default={char for char in "foo"})
26 | ContextVar("cv", default={char: idx for idx, char in enumerate("foo")})
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 | ContextVar("cv", default=collections.deque())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 27:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:27:26
   |
25 | ContextVar("cv", default={char for char in "foo"})
26 | ContextVar("cv", default={char: idx for idx, char in enumerate("foo")})
27 | ContextVar("cv", default=collections.deque())
   |                          ^^^^^^^^^^^^^^^^^^^
28 | 
29 | def bar() -> list[int]:
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 32:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:32:26
   |
30 |     return [1, 2, 3]
31 | 
32 | ContextVar("cv", default=bar())
   |                          ^^^^^
33 | ContextVar("cv", default=time.time())
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 33:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:33:26
   |
32 | ContextVar("cv", default=bar())
33 | ContextVar("cv", default=time.time())
   |                          ^^^^^^^^^^^
34 | 
35 | def baz(): ...
   |
   = help: Replace with `None`; initialize with `.set()``
error[B039]: 36:26: Do not use mutable data structures for `ContextVar` defaults

  --> B039.py:36:26
   |
35 | def baz(): ...
36 | ContextVar("cv", default=baz())
   |                          ^^^^^
   |
   = help: Replace with `None`; initialize with `.set()``
